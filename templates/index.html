<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Fine Dining Coach – Free Menu Analyzer</title>
  <meta name="color-scheme" content="dark light">
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body class="bg-gradient-to-b from-zinc-950 via-zinc-900 to-zinc-950 text-zinc-100 relative overflow-x-hidden">
  <!-- Decorative blobs -->
  <div class="absolute -top-24 -left-24 w-[38rem] h-[38rem] bg-indigo-500/30 blur-[120px] rounded-full pointer-events-none"></div>
  <div class="absolute -bottom-32 -right-20 w-[40rem] h-[40rem] bg-emerald-500/20 blur-[140px] rounded-full pointer-events-none"></div>

  <div class="max-w-6xl mx-auto p-4 md:p-6">
    <!-- Header -->
    <header class="flex items-center gap-3 justify-between mb-6 sticky top-0 z-30 backdrop-blur supports-[backdrop-filter]:bg-zinc-950/50 rounded-2xl px-3 py-2 border border-zinc-800/60">
      <div class="flex items-center gap-3">
        <div class="h-9 w-9 rounded-xl bg-gradient-to-br from-indigo-500 to-emerald-500 shadow-lg shadow-indigo-500/20 grid place-items-center">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-5 w-5 text-white"><path fill="currentColor" d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2m1 14H8l5-9v5h3z"/></svg>
        </div>
        <div>
          <h1 class="text-xl md:text-2xl font-bold tracking-tight">Fine Dining Coach</h1>
          <p class="text-xs md:text-sm text-zinc-400">Free Menu Analyzer • Deterministic rules • No paid APIs</p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button id="darkToggle" class="btn-ghost text-xs">Theme</button>
        <a href="https://world.openstreetmap.org/" target="_blank" class="badge-soft">OSM</a>
        <a href="https://world.openfoodfacts.org/" target="_blank" class="badge-soft">OFF</a>
      </div>
    </header>

    <!-- Hero -->
    <section class="relative mb-6 rounded-3xl border border-zinc-800/60 bg-zinc-900/60 backdrop-blur-xl p-5 md:p-8 overflow-hidden">
      <div class="grid md:grid-cols-2 gap-6 items-center">
        <div>
          <h2 class="text-2xl md:text-4xl font-extrabold leading-tight">Healthy orders in seconds, no subscriptions, zero keys.</h2>
          <p class="mt-2 text-zinc-300">Paste a menu URL or upload a PDF, set your goals, and get transparent recommendations with copy‑ready server asks and QR.</p>
          <div class="mt-4 flex flex-wrap gap-2">
            <span class="chip">No paid APIs</span>
            <span class="chip">OSM + Overpass</span>
            <span class="chip">Open Food Facts</span>
            <span class="chip">Robots.txt aware</span>
          </div>
        </div>
        <div class="grid sm:grid-cols-2 gap-4">
          <div class="panel hover-lift">
            <div class="flex items-center gap-2">
              <div class="icon-wrap">
                <svg viewBox="0 0 24 24" class="h-5 w-5"><path fill="currentColor" d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2m1 14H8l5-9v5h3z"/></svg>
              </div>
              <h3 class="font-semibold">Find by ZIP</h3>
            </div>
            <p class="text-sm text-zinc-400 mt-1">Discover nearby restaurants with Overpass, sorted by distance.</p>
          </div>
          <div class="panel hover-lift">
            <div class="flex items-center gap-2">
              <div class="icon-wrap bg-emerald-500/20 text-emerald-300 border-emerald-500/30">
                <svg viewBox="0 0 24 24" class="h-5 w-5"><path fill="currentColor" d="M3 6h18v2H3zm0 5h18v2H3zm0 5h10v2H3z"/></svg>
              </div>
              <h3 class="font-semibold">Analyze Menus</h3>
            </div>
            <p class="text-sm text-zinc-400 mt-1">Deterministic parsing of HTML/PDF with transparent scoring.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Two main cards -->
    <main class="grid lg:grid-cols-2 gap-6">
      <!-- ZIP search -->
      <section class="surface-card">
        <div class="section-head">
          <div class="icon-wrap">
            <svg viewBox="0 0 24 24" class="h-5 w-5"><path fill="currentColor" d="M12 2a7 7 0 0 1 7 7c0 5.25-7 13-7 13S5 14.25 5 9a7 7 0 0 1 7-7m0 9.5A2.5 2.5 0 1 0 12 6a2.5 2.5 0 0 0 0 5.5"/></svg>
          </div>
          <h2 class="title">Find healthy picks by ZIP</h2>
        </div>
        <form id="zipForm" class="grid gap-3">
          <div class="grid grid-cols-3 gap-2">
            <input id="zip" required maxlength="5" pattern="\\d{5}" class="input col-span-2" placeholder="ZIP e.g., 80202">
            <input id="radius" type="number" min="1" max="10" value="3" class="input" placeholder="mi">
          </div>
          <div class="flex items-center gap-3 text-sm">
            <label class="flex items-center gap-2"><input type="checkbox" id="onlyChains" class="accent-indigo-500"> Only show chains</label>
            <div class="flex items-center gap-2 ml-auto">
              <span class="preset" id="presetCut">Cut 600 kcal</span>
              <span class="preset" id="presetMaintain">Maintain 750 kcal</span>
              <span class="preset" id="presetHighP">High‑Protein 40–60g</span>
            </div>
          </div>
          <div class="flex flex-wrap gap-2">
            <button class="btn-primary" type="submit">Search</button>
            <div class="goal-wrap">
              <label class="text-xs opacity-80">Calorie Target</label>
              <input id="calTarget" type="number" value="600" class="input w-28">
            </div>
            <label class="flag"><input type="checkbox" id="prioritizeProtein" checked> Prioritize protein</label>
            <label class="flag"><input type="checkbox" id="lowCarb"> Low‑carb</label>
            <label class="flag"><input type="checkbox" id="noFried"> No fried</label>
          </div>
        </form>
        <div id="zipResults" class="mt-4 grid gap-3"></div>
      </section>

      <!-- Analyzer -->
      <section class="surface-card">
        <div class="section-head">
          <div class="icon-wrap bg-emerald-500/20 text-emerald-300 border-emerald-500/30">
            <svg viewBox="0 0 24 24" class="h-5 w-5"><path fill="currentColor" d="M3 6h18v2H3zm0 5h18v2H3zm0 5h10v2H3z"/></svg>
          </div>
          <h2 class="title">Analyze a menu (URL or PDF)</h2>
        </div>
        <form id="analyzeUrlForm" class="grid gap-3">
          <input id="menuUrl" class="input" placeholder="Paste a menu URL (http/https)">
          <div class="flex flex-wrap items-center gap-3 text-sm">
            <label class="flag"><input type="checkbox" id="prioritizeProteinURL" checked> Prioritize protein</label>
            <label class="flag"><input type="checkbox" id="lowCarbURL"> Low‑carb</label>
            <label class="flag"><input type="checkbox" id="noFriedURL"> No fried</label>
            <button class="btn-ghost ml-auto" type="submit">Analyze URL</button>
          </div>
        </form>

        <div class="divider"></div>

        <form id="pdfForm" enctype="multipart/form-data" class="grid gap-3">
          <div class="flex items-center gap-3">
            <input id="pdfFile" type="file" accept="application/pdf" class="input">
            <label class="flag"><input type="checkbox" id="enableOCR"> Enable OCR (needs Tesseract)</label>
            <button class="btn-ghost ml-auto" type="submit">Analyze PDF</button>
          </div>
        </form>

        <div class="divider"></div>

        <div>
          <label class="text-sm opacity-80">Open Food Facts search</label>
          <div class="flex gap-2 mt-1">
            <input id="offQuery" class="input" placeholder="e.g., keto tortilla">
            <button id="offBtn" class="btn-secondary" type="button">Search</button>
          </div>
          <div id="offResults" class="mt-3 grid sm:grid-cols-2 gap-2"></div>
        </div>
      </section>
    </main>

    <!-- How it works & Embed -->
    <section class="mt-6 surface-card">
      <h3 class="text-lg font-semibold">How it works</h3>
      <p class="text-sm text-zinc-300 mt-1">We parse menus deterministically, estimate calories and protein with transparent rules, and suggest server‑friendly modifiers. For discovery we use OpenStreetMap. No paid APIs, no keys.</p>
      <details class="mt-3 group">
        <summary class="cursor-pointer text-sm underline decoration-dotted">Embed in your portal (responsive)</summary>
        <pre class="code mt-2">
&lt;iframe src="YOUR_RENDER_URL" width="100%" style="border:0" id="fdc-iframe"&gt;&lt;/iframe&gt;
&lt;script&gt;
window.addEventListener("message", (e)=>{
  if(e.data && e.data.type==="fdc-resize"){
    document.getElementById("fdc-iframe").style.height = e.data.height+"px";
  }
});
&lt;/script&gt;</pre>
    </section>

    <footer class="mt-6 text-xs text-zinc-400">
      © OpenStreetMap contributors. Geocoding by <a class="underline" href="https://nominatim.openstreetmap.org" target="_blank">Nominatim</a>. Data via <a class="underline" href="https://overpass-api.de/" target="_blank">Overpass API</a>. Packaged items from <a class="underline" href="https://world.openfoodfacts.org/" target="_blank">Open Food Facts</a>.
    </footer>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
