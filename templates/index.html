<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Fine Dining Coach – Free Menu Analyzer</title>
  <link rel="stylesheet" href="/static/styles.css?v=20250921-8"/>
</head>
<body class="theme">
  <header class="hero">
    <div class="hero-inner">
      <div>
        <h1>Fine Dining Coach</h1>
        <p class="subtitle">Free Menu Analyzer · Deterministic rules · No paid APIs</p>
      </div>
      <div class="status-ribbon">
        <span id="statusDot" class="dot dot-warn"></span>
        <span id="statusText">Initializing…</span>
        <button id="testNetworkBtn" class="btn-ghost ml8">Test network</button>
      </div>
    </div>
    <nav class="hero-nav">
      <span class="nav-pill on">Nominatim</span>
      <span class="nav-pill on">Overpass</span>
      <span class="nav-pill on">Open Food Facts</span>
    </nav>
  </header>

  <main class="container">
    <section class="cards two-col">
      <div class="card">
        <div class="card-header">1 · Find by ZIP <span class="muted">Search restaurants near you</span></div>
        <form id="zipForm" class="grid2">
          <label class="field">
            <span class="label">ZIP code</span>
            <input id="zipInput" name="zip" inputmode="numeric" maxlength="5" pattern="\d{5}" placeholder="e.g., 87124" class="input"/>
          </label>
          <label class="field">
            <span class="label">Radius (miles)</span>
            <input id="radiusInput" name="radius_miles" type="number" step="0.1" min="0.5" max="25" value="3" class="input"/>
          </label>
          <label class="check">
            <input type="checkbox" name="only_chains" id="onlyChains"/>
            <span>Only show chains</span>
          </label>
          <div></div>
          <div class="row">
            <button id="searchBtn" type="submit" class="btn-primary">Search</button>
          </div>
          <div class="help">
            Enter your ZIP and press Search. We use OpenStreetMap to find nearby restaurants.
          </div>
        </form>
      </div>

      <div class="card">
        <div class="card-header">2 · Analyze Menus <span class="muted">Paste URL or upload PDF</span></div>
        <form id="urlForm" class="grid1">
          <label class="field">
            <span class="label">Menu URL</span>
            <input id="menuUrl" name="menu_url" type="url" placeholder="https://example-restaurant.com/menu" class="input"/>
          </label>
          <div class="row">
            <button id="analyzeUrlBtn" type="submit" class="btn-primary">Analyze URL</button>
          </div>
          <div class="help">Copy a menu link, paste above, then click Analyze URL.</div>
        </form>
        <hr class="sep"/>
        <div class="prefs">
          <div class="pref">
            <span class="label">Calorie Target</span>
            <input type="number" name="calorie_target" id="calTarget" value="600" min="300" max="1200" step="10" class="input small"/>
          </div>
          <label class="check"><input type="checkbox" name="prioritize_protein" id="prioProtein" checked/><span>Prioritize protein</span></label>
          <label class="check"><input type="checkbox" name="flags" value="low_carb"/><span>Low-carb</span></label>
          <label class="check"><input type="checkbox" name="flags" value="no_fried"/><span>No fried</span></label>
        </div>
      </div>
    </section>

    <section id="results" class="results"></section>

    <section class="panel">
      <div class="panel-title">How to use</div>
      <ol class="steps">
        <li>Enter your ZIP and press <strong>Search</strong>.</li>
        <li>Open a result’s website, copy the menu URL, paste it, then click <strong>Analyze URL</strong>.</li>
        <li>Copy the one-line server ask from your favorite pick and order with confidence.</li>
      </ol>
    </section>
  </main>

  <footer class="footer">
    © OpenStreetMap contributors. Geocoding by <a href="https://nominatim.openstreetmap.org" target="_blank" rel="noopener">Nominatim</a>.
    Data via <a href="https://overpass-api.de" target="_blank" rel="noopener">Overpass API</a>. Packaged items from
    <a href="https://world.openfoodfacts.org" target="_blank" rel="noopener">Open Food Facts</a>.
  </footer>

  <script src="/static/app.js?v=20250921-8" defer></script>
</body>
</html>
