<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Fine Dining Coach – Free Menu Analyzer</title>
  <link rel="stylesheet" href="/static/styles.css?v=20250922-1"/>
</head>
<body class="theme">
  <header class="hero">
    <div class="hero-inner">
      <div>
        <h1>Fine Dining Coach</h1>
        <p class="subtitle">Healthy restaurant picks near you — free, no logins</p>
      </div>
      <div class="status-ribbon">
        <span id="statusDot" class="dot dot-warn"></span>
        <span id="statusText">Initializing…</span>
        <button id="testNetworkBtn" class="btn-ghost ml8" type="button">Test network</button>
      </div>
    </div>
    <div class="quickbar">
      <div class="qstep">
        <span class="qnum">1</span>
        <div><div class="qtitle">Find by ZIP</div><div class="qdesc">Enter ZIP + radius, press <b>Search</b>.</div></div>
      </div>
      <div class="qstep">
        <span class="qnum">2</span>
        <div><div class="qtitle">Analyze menus</div><div class="qdesc">Open a result's website, copy the menu URL, paste &amp; <b>Analyze URL</b>.</div></div>
      </div>
      <div class="qstep">
        <span class="qnum">3</span>
        <div><div class="qtitle">Order smart</div><div class="qdesc">Review picks &amp; tap <i>Copy ask</i> for the server.</div></div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="cards two-col">
      <div class="card">
        <div class="card-header">1 · Find by ZIP <span class="muted">Nearby restaurants</span></div>
        <form id="zipForm" class="grid2">
          <label class="field">
            <span class="label">ZIP code</span>
            <input id="zipInput" name="zip" inputmode="numeric" maxlength="5" pattern="\d{5}" placeholder="e.g., 87124" class="input"/>
          </label>
          <label class="field">
            <span class="label">Radius (miles)</span>
            <input id="radiusInput" name="radius_miles" type="number" step="0.1" min="0.5" max="25" value="3" class="input"/>
          </label>
          <label class="check"><input type="checkbox" name="only_chains" id="onlyChains"/><span>Only show chains</span></label>
          <div></div>
          <div class="row"><button id="searchBtn" type="submit" class="btn-primary">Search</button></div>
          <div class="help">Open a result’s site after search and bring its menu link into Step 2.</div>
        </form>
      </div>

      <div class="card">
        <div class="card-header">2 · Analyze Menus <span class="muted">Paste URL or upload a PDF</span></div>
        <form id="urlForm" class="grid1">
          <label class="field">
            <span class="label">Menu URL</span>
            <input id="menuUrl" name="menu_url" type="url" placeholder="https://example-restaurant.com/menu" class="input"/>
          </label>
          <div class="row"><button id="analyzeUrlBtn" type="submit" class="btn-primary">Analyze URL</button></div>
          <div class="help">Respects robots.txt. If blocked, download the menu as PDF and upload below.</div>
        </form>
        <hr class="sep"/>
        <form id="pdfForm" class="grid1" enctype="multipart/form-data">
          <label class="field">
            <span class="label">Menu PDF</span>
            <input id="menuPdf" name="menu_pdf" type="file" accept="application/pdf" class="input"/>
          </label>
          <label class="check"><input type="checkbox" id="useOcr"/><span>Try OCR if text isn’t found</span></label>
          <div class="row"><button id="analyzePdfBtn" type="submit" class="btn-primary">Analyze PDF</button></div>
        </form>
        <hr class="sep"/>
        <div class="prefs">
          <div class="pref"><span class="label">Calorie Target</span><input type="number" name="calorie_target" id="calTarget" value="600" min="300" max="1200" step="10" class="input small"/></div>
          <label class="check"><input type="checkbox" name="prioritize_protein" id="prioProtein" checked/><span>Prioritize protein</span></label>
          <label class="check"><input type="checkbox" name="flags" value="low_carb"/><span>Low-carb</span></label>
          <label class="check"><input type="checkbox" name="flags" value="no_fried"/><span>No fried</span></label>
          <label class="check"><input type="checkbox" name="flags" value="gluten_mindful"/><span>Gluten mindful</span></label>
          <label class="check"><input type="checkbox" name="flags" value="dairy_mindful"/><span>Dairy mindful</span></label>
        </div>
      </div>
    </section>

    <section id="results" class="results"></section>

    <section class="panel">
      <div class="panel-title">Tips</div>
      <ol class="steps">
        <li>Use precise ZIP + smaller radius for faster results.</li>
        <li>Menu pages with heavy JavaScript may be blocked; use PDF instead.</li>
        <li>Attach a packaged side via Open Food Facts in the results.</li>
      </ol>
    </section>
  </main>

  <footer class="footer">
    © OpenStreetMap contributors. Geocoding by <a href="https://nominatim.openstreetmap.org" target="_blank" rel="noopener">Nominatim</a>.
    Data via <a href="https://overpass-api.de" target="_blank" rel="noopener">Overpass API</a>. Packaged items from
    <a href="https://world.openfoodfacts.org" target="_blank" rel="noopener">Open Food Facts</a>.
  </footer>

  <script src="/static/app.js?v=20250922-1" defer></script>
</body>
</html>
